!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Vuelite={})}(this,(function(e){"use strict";function t(e,t,n){t=t.trim();let s=e;t.split(/[.[\]]/).filter(Boolean).forEach(((e,t,i)=>{if(t===i.length-1)s[e]=n;else if(/^\d+$/.test(e)){if(!Array.isArray(s))return;s=s[+e]}else{if(!Object.hasOwn(s,e))return;s=s[e]}}))}function n(e){const t=document.createDocumentFragment();let n;for(;n=e.firstChild;)t.appendChild(n);return t}function s(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}const i=e=>"object"===s(e)||"array"===s(e),r=e=>"object"===s(e),o=e=>"function"===s(e);function c(e){return/{{\s*.*?\s*}}/.test(e)}function a(e){if(e instanceof HTMLElement)return e.tagName.includes("-")}function l(e){return e instanceof HTMLElement&&e.isComponent}class h{constructor(){this.listener=new Set}subscribe(e){this.listener.add(e)}unsubscribe(e){this.listener.delete(e)}notify(){this.listener.forEach((e=>{e.isMethods||e.update()}))}depend(){var e;null===(e=h.activated)||void 0===e||e.addDep(this)}}h.activated=null;class u{static getStore(){return this.globalDeps}static addStore(e){this.globalDeps.push(e)}static forceUpdate(){this.globalDeps.forEach((e=>{for(const t of e.values())t.notify()}))}static addObserver(e){this.globalObservers.push(e)}static updateMethods(){this.globalObservers.forEach((e=>{e.isMethods&&e.update()}))}}u.globalDeps=[],u.globalObservers=[];class d{constructor(e){this.proxy=this.define(e)}define(e){const t=this,n=new Map,r=new Map;u.addStore(r);return new Proxy(e,{get(e,o,c){const a=Reflect.get(e,o,c);if("symbol"===s(o))return a;r.has(o)||r.set(o,new h),r.get(o).depend();const l=e[o];return i(l)?(n.has(o)||n.set(o,t.define(l)),n.get(o)):a},set(e,t,n,s){const i=e._length,o=Reflect.set(e,t,n,s);return i!==e._length&&r.has("_length")&&r.get("_length").notify(),r.has(t)&&r.get(t).notify(),o},deleteProperty(e,t){const n=e._length,s=Reflect.deleteProperty(e,t);return n!==e._length&&r.has("_length")&&r.get("_length").notify(),s}})}}function f(e){const{data:t,props:n}=e.$options,s=o(t)?t():{},i=new d(s).proxy;Object.defineProperty(e,"$data",{get:()=>i});for(const t in s)36!==t.charCodeAt(0)&&Object.defineProperty(e,t,{configurable:!1,get:()=>i[t],set:e=>{i[t]=e}});if(n){const t=function(e){return e.reduce(((e,t)=>(e[t]=null,e)),{})}(n),s=new d(t).proxy;Object.defineProperty(e,"$props",{get:()=>s});for(const n in t)Object.defineProperty(e,n,{configurable:!1,get:()=>s[n],set:e=>{}})}!function(e){const{methods:t}=e.$options;if(!t)return;Object.entries(t).forEach((([t,n])=>{if(Object.hasOwn(e,t))throw new Error(`${t} has already been declared`);Object.defineProperty(e,t,{value:(...t)=>n.apply(e,t)})}))}(e),function(e){const{computed:t}=e.$options;if(!t)return;for(const n in t)if(Object.hasOwn(e,n))throw new Error(`${n} has already been declared`);Object.entries(t).forEach((([t,n])=>{const s={};!function(e){return"function"!=typeof e}(n)?s.get=()=>n.call(e):(s.get=n.get.bind(e),s.set=(...t)=>{n.set.apply(e,t)}),Object.defineProperty(e,t,s)}))}(e)}class p{constructor(e){const t=e.cssRules.length;e.insertRule("*{}",t),this.rule=e.cssRules[t]}selector(e){this.rule.selectorText=e}setStyle(e,t){this.rule.style[e]=t}}function m(e){const{styles:t,scopedStyles:n}=e.$options;if(t||n){if(t){const e=document.createElement("style");document.head.appendChild(e),Object.entries(t).forEach((([t,n])=>{const s=new p(e.sheet);s.selector(t),Object.entries(n).forEach((([e,t])=>{s.setStyle(e,t)}))}))}if(n){const t=document.createElement("style");document.head.appendChild(t);const s="v-"+Math.random().toString(36).substring(2,7);Object.entries(n).forEach((([e,n])=>{const i=`${e}[data-scopeid="${s}"], *[data-scopeid="${s}"] ${e}`,r=new p(t.sheet);r.selector(i),Object.entries(n).forEach((([e,t])=>{r.setStyle(e,t)}))})),e.$el instanceof HTMLElement?e.$el.setAttribute("data-scopeid",s):e.$el instanceof DocumentFragment&&Array.from(e.$el.children).forEach((e=>{e.setAttribute("data-scopeid",s)}))}}}const b=["bind","model","text","style","class","html","on","if","show","for"];function v(e){const t=/{{\s*(.*?)\s*}}/g,n=[];let s;for(;null!==(s=t.exec(e));)n.push(s[1]);return n}function g(e){return e.startsWith("v-")||e.startsWith(":")||e.startsWith("@")}function y(e,t){if(l(t))return"Component";if((e=>1===e.nodeType)(t)){const n=t.attributes,s=n.getNamedItem("ref");if(s&&(e.$refs[s.value]=t),Array.from(n).some((e=>g(e.name))))return"Directive"}else if((e=>3===e.nodeType)(t)&&c(t.textContent)&&!((e,t)=>{const n=null==t?void 0:t.attributes;if(n)return Array.from(n).some((t=>t.name===e))})("v-text",t.parentElement)){if(v(t.textContent||"").length>0)return"Template"}}const x={text(e,t){e.textContent=t},class(e,t){i(t)&&Object.entries(t).forEach((([t,n])=>{n&&e.classList.add(t)}))},style(e,t){for(const[s,i]of Object.entries(t))/^["'].*["']$/.test(n=i)&&n[0]===n[n.length-1]?e.style[s]=i.slice(1,-1):e.style[s]=i;var n},html(e,t){e.innerHTML=t},inputCheckbox(e,t){e.checked=t},inputRadio(e,t){e.checked=e.value===t},inputValue(e,t){e.value=t},inputMultiple(e,t){const n=Array.from(e.options);Array.isArray(t)&&n.forEach((e=>{e.selected=t.includes(e.value)}))},customBind(e,t){null!=t&&e.setAttribute(this.modifier,t)},objectBind(e,t){i(t)&&Object.entries(t).forEach((([t,n])=>e.setAttribute(t,n)))},show(e,t){e.style.display=t?"":"none"}};function w(e,t){try{return new Function(`\n      with (this) {\n        return ${t};\n      }\n    `).call(e)}catch(e){return}}function E(e,t){return c(t)?function(e,t){const n=v(t).reduce(((t,n)=>("()"===n.slice(-2)&&(h.activated.isMethods=!0),t[n]=w(e,n),t)),{});return t.replace(/{{\s*(.*?)\s*}}/g,((e,t)=>{var s;return null!==(s=n[t])&&void 0!==s?s:""}))}(e,t):w(e,t)}class ${constructor(e,t,n,s){var i;if(this.vm=e,this.exp=t,this.onUpdate=n,this.deps=new Set,this.isMethods=!1,u.addObserver(this),this.value=this.getterTrigger(),s){null!==(i=s.immediate)&&void 0!==i&&i&&n(this.value)}else n(this.value)}addDep(e){e.subscribe(this),this.deps.add(e)}getterTrigger(){h.activated=this;const e=E(this.vm,this.exp);return i(e)&&e._length,h.activated=null,e}update(){const e=this.value,t=this.getterTrigger();var n;(n=t)!==Object(n)&&e===t||(this.value=t,this.isMethods?this.onUpdate(t,e):this.vm.updateQueue.push((()=>this.onUpdate(t,e))))}}function O(e){const{watch:t}=e.$options;t&&Object.entries(t).forEach((([t,n])=>{if(function(e){return"function"===s(e)}(n))new $(e,t,n,{immediate:!1});else{const{handler:s,...i}=n;new $(e,t,s,i)}}))}class k{constructor(e,t,n){this.vm=e,this.el=t,this.exp=n,this.parent=t.parentElement||e.$el,this.childIndex=Array.from(this.parent.children).indexOf(t),this.ifFragment=document.createDocumentFragment(),this.checkForElse(),this.render()}render(){new $(this.vm,this.exp,((e,t)=>{this.updater(e)}))}checkForElse(){const e=this.el.nextElementSibling;(null==e?void 0:e.hasAttribute("v-else"))&&(this.elseElement=e,this.elseFragment=document.createDocumentFragment())}updater(e){if(e){const e=this.parent.children[this.childIndex];this.parent.insertBefore(this.ifFragment,e),this.elseElement&&this.elseFragment.appendChild(this.elseElement)}else if(this.ifFragment.appendChild(this.el),this.elseElement){const e=this.parent.children[this.childIndex];this.parent.insertBefore(this.elseFragment,e)}}}class C{visit(e,t){let n;const s=[t.firstChild];for(;n=s.pop();)if(n){if((i=n)instanceof HTMLElement&&i.hasAttribute("v-for")){e(n),n.nextSibling&&s.push(n.nextSibling);continue}e(n),n.firstChild&&s.push(n.firstChild),n.nextSibling&&s.push(n.nextSibling)}var i}}function j(e,t,n,i){if("object"===s(i)){const s=Object.keys(i)[n];switch(e.length){case 1:return{[e[0]]:`${t}.${s}`};case 2:return{[e[0]]:`${t}.${s}`,[e[1]]:`"${s}"`};case 3:return{[e[0]]:`${t}.${s}`,[e[1]]:`"${s}"`,[e[2]]:n};default:return{}}}else if("number"===s(i))switch(e.length){case 1:return{[e[0]]:n+1};case 2:return{[e[0]]:n+1,[e[1]]:n};default:return{}}else switch(e.length){case 1:return{[e[0]]:`${t}[${n}]`};case 2:return{[e[0]]:`${t}[${n}]`,[e[1]]:n};default:return{}}}function _(e,t){return e?(Object.keys(e).forEach((n=>{const s=new RegExp(`\\b${n}\\b`,"g");t=t.replace(s,e[n])})),t):t}class M{constructor(e,t){this.loop=e,this.data=t,this.scanner=new L(new C)}bind(e,t){const{alias:n,vm:s,loopEffects:i,listExp:r,parentContext:o}=this.loop,c={...o,...j(n,r,t,this.data)};R.context=c;const a=this.scanner.scanPartial(s,e,i);return R.context=null,a}}class A{constructor(e,t,n,s){this.vm=e,this.el=t,this.exp=n,this.parentContext=s,this.loopEffects=[],this.parent=t.parentElement||e.$el,this.startIndex=Array.from(this.parent.children).indexOf(t);const i=function(e){let t=e.match(/^(.+?)\s+in\s+(.+)$/);return t?{key:t[1],list:t[2]}:(t=e.match(/^(.+?)\s+of\s+(.+)$/),t?{key:t[1],list:t[2]}:null)}(this.exp);if(!i)return;const{key:r,list:o}=i;this.listExp=o,this.alias=function(e){const t=e.match(/\(([^)]+)\)/);return t?t[1].split(",").map((e=>e.trim())).filter((e=>e)):[e]}(r),this.render()}render(){new $(this.vm,this.listExp,((e,t)=>{this.updater(e)}))}updater(e){const t=document.createDocumentFragment(),n=function(e){switch(s(e)){case"string":case"array":return e.length;case"object":return Object.values(e).length;case"number":return Math.max(0,Number(e));default:return 0}}(e),i=this.startIndex+n-1,r=new M(this,e);if(Array.from({length:n}).forEach(((e,n)=>{const s=this.el.cloneNode(!0);var i;(i=s).removeAttribute("v-for"),i.removeAttribute(":key"),i.removeAttribute("v-bind:key");const o=r.bind(s,n);t.appendChild(o)})),this.el.isConnected)this.parent.replaceChild(t,this.el),this.endIndex=i;else{for(let e=this.endIndex;e>=this.startIndex;e--){const t=this.parent.children[e];t&&this.parent.removeChild(t)}this.el.remove();const e=this.parent.children[this.startIndex];this.parent.insertBefore(t,e),this.endIndex=this.startIndex+n-1}this.clearEffects()}clearEffects(){this.loopEffects.forEach((e=>e())),this.loopEffects=[]}}class T{constructor(e,t,n,s,i){this.vm=t,this.node=n,this.exp=s;const{key:r,modifier:o}=function(e){if([":","@"].includes(e[0]))return":"===e.slice(0,1)?{key:"bind",modifier:e.slice(1)}:{key:"on",modifier:e.slice(1)};{const t=/^v-([\w-]+)(:(\w+))?$/,n=e.match(t);return{key:n[1],modifier:n[3]||null}}}(e);this.name=r,this.modifier=o,(e=>b.includes(e))(r)&&(((e,t)=>e.startsWith("else")||"bind"===e&&"key"===t)(r,o)||(!function(e){return"if"===e||"for"===e}(r)?(!function(e){return e.startsWith("v-on:")||e.startsWith("@")}(e)?this[r]():this.on(),n instanceof HTMLElement&&n.removeAttribute(e)):this.scheduleTask(r,i)))}bind(e){e=this.selectUpdater(e),new $(this.vm,this.exp,(t=>{if(l(this.node)){const e=this.vm.$components.get(this.node)||R.globalComponents.get(this.node);e.$parent=this.vm,e.$props[this.modifier]=t}else e(this.node,t)}))}model(){const e=this.node;switch(e.tagName){case"INPUT":{const n=e;"checkbox"===n.type?(n.addEventListener("change",(e=>{const n=e.target.checked;t(this.vm,this.exp,n)})),this.bind(x.inputCheckbox)):"radio"===n.type?(n.name=this.exp,n.addEventListener("change",(e=>{const n=e.target.value;t(this.vm,this.exp,n)})),this.bind(x.inputRadio)):(n.addEventListener("input",(e=>{const n=e.target.value;t(this.vm,this.exp,n)})),this.bind(x.inputValue));break}case"TEXTAREA":e.addEventListener("input",(e=>{const n=e.target.value;t(this.vm,this.exp,n)})),this.bind(x.inputValue);break;case"SELECT":{const n=e;n.multiple?(n.addEventListener("change",(e=>{const n=e.target,s=Array.from(n.selectedOptions).map((e=>e.value));t(this.vm,this.exp,s)})),this.bind(x.inputMultiple)):(n.addEventListener("change",(e=>{const n=e.target.value;t(this.vm,this.exp,n)})),this.bind(x.inputValue));break}default:throw new Error(`Unsupported element type: ${e.tagName}`)}}text(){this.bind(x.text.bind(this))}style(){this.bind(x.style)}class(){this.bind(x.class)}html(){this.bind(x.html)}show(){this.bind(x.show)}on(){if(null===this.vm.$props[this.exp])new $(this.vm,this.exp,(e=>{this.node.addEventListener(this.modifier,e)}));else{const t=(e=this.vm,this.exp.trim().split(".").reduce(((e,t)=>e&&Object.hasOwn(e,t)?e[t]:null),e));if("function"==typeof t)this.node.addEventListener(this.modifier,t);else{const e=w(this.vm,`function(){ ${this.exp} }`);this.node.addEventListener(this.modifier,e)}}var e}scheduleTask(e,t){const n={...R.context},s="if"===e?k:A,i=()=>new s(this.vm,this.node,this.exp,n);t?t.push(i):this.vm.deferredTasks.push(i)}selectUpdater(e){const t=this.modifier;return"text"===t||"class"===t||"style"===t?x[t].bind(this):e||(t?x.customBind.bind(this):x.objectBind.bind(this))}}class P{constructor(e,t,n,s){switch(this.vm=e,this.node=t,this.loopEffects=s,n){case"Component":case"Directive":this.directiveBind(t);break;case"Template":this.templateBind(t)}}directiveBind(e){Array.from(e.attributes).forEach((({name:t,value:n})=>{if(g(t)){n=_(R.context,n),new T(t,this.vm,e,n,this.loopEffects)}}))}templateBind(e){let t=e.textContent;t=_(R.context,t),new T("v-text",this.vm,e,t)}}class S{constructor(e){this.visitor=e}visit(e,t){this.visitor.visit(e,t)}}class L extends S{scan(e){const t=t=>{a(t)&&this.replaceComponent(e,t);const n=y(e,t);n&&new P(e,t,n)};this.fragment=n(e.$el),t(this.fragment),this.visit(t,this.fragment),e.$el.appendChild(this.fragment),e.clearTasks()}scanPartial(e,t,s){const i=n(t),r=t=>{a(t)&&this.replaceComponent(e,t,s);const n=y(e,t);n&&new P(e,t,n,s)};return r(i),this.visit(r,i),t.appendChild(i),t}replaceComponent(e,t,n){const s=e.$components.get(t)||R.globalComponents.get(t);if(s)e.deferredTasks.push((()=>{var e;return null===(e=t.parentNode)||void 0===e?void 0:e.replaceChild(s.$el,t)})),t.isComponent=!0;else{const s=e.componentsNames[t.tagName]||R.globalComponentsNames[t.tagName];if(s){t.isComponent=!0;const i=new R(s);e.componentsNames[t.tagName]?e.$components.set(t,i):R.globalComponents.set(t,i);const r=()=>{var e;return null===(e=t.parentNode)||void 0===e?void 0:e.replaceChild(i.$el,t)};n?n.push(r):e.deferredTasks.push(r)}}}}class N{constructor(){this.deferredTasks=[]}setHooks(e){this.$hooks=e}callHook(e){const t=this.$hooks[e];"function"===s(t)&&("beforeCreate"===e?t.call(null):t.call(this))}clearTasks(){this.deferredTasks.forEach((e=>e())),this.deferredTasks=[]}}class U extends N{constructor(e){if(super(),this.$props={},this.$parent=null,this.$refs={},this.$components=new Map,this.componentsNames={},this.updateQueue=[],this.$options=e,this.setHooks(this.$options),this.localComponents(e),this.callHook("beforeCreate"),f(this),O(this),this.callHook("created"),!this.setupDOM(e))return this;this.mount()}mount(e){this.callHook("beforeMount"),e&&(this.$el=document.querySelector(e)),m(this);new L(new C).scan(this),this.callHook("mounted"),requestAnimationFrame((()=>this.render()))}render(){if(this.updateQueue.length>0){for(this.callHook("beforeUpdate");this.updateQueue.length>0;){const e=this.updateQueue.shift();"function"===s(e)&&e()}u.updateMethods(),this.callHook("updated")}requestAnimationFrame((()=>this.render()))}$watch(e,t,n){new $(this,e,t,n)}$forceUpdate(){u.forceUpdate()}setupDOM(e){if(e.template)return this.$el=function(e){if(!e)return;const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(e.template);if(e.el){const t=document.querySelector(e.el);return function(e){return e instanceof HTMLTemplateElement}(t)?this.$el=t.content.cloneNode(!0):this.$el=t}return null}localComponents(e){const{components:t}=e;t&&Object.entries(t).forEach((([e,t])=>{this.componentsNames[e.toUpperCase()]=t,Array.from(document.querySelectorAll(e)).forEach((e=>{this.$components.set(e,new U(t))}))}))}static component(e,t){this.globalComponentsNames[e.toLocaleUpperCase()]=t,Array.from(document.querySelectorAll(e)).forEach((e=>{this.globalComponents.set(e,new U(t))}))}}U.globalComponentsNames={},U.globalComponents=new Map;var R=U;function B(e){return"object"===s(e)&&Object.hasOwn(e,"__v_isRef")}function H(e){return i(e)&&Object.hasOwn(e,"__v_isReactive")}const F=new WeakMap,D=new WeakMap;function I(e){r(e)&&(e=W(e));const t=Object.defineProperties({},{value:{enumerable:!0,get:()=>(q(t,"value"),e),set:n=>{e=n,Q(t,"value")}},__v_isRef:{value:!0},__v_exp:{writable:!0,value:""}});return t}function W(e){const t={get(e,t,n){const s=Reflect.get(e,t,n);return q(e,t),s},set(e,t,n,s){const i=Reflect.set(e,t,n,s);return Q(e,t),i}},n=new Proxy(e,t);return Object.defineProperty(n,"__v_isReactive",{configurable:!1,enumerable:!1,value:!0})}function q(e,t){F.has(e)||F.set(e,new Map);const n=F.get(e);n.has(t)||n.set(t,new h);n.get(t).depend()}function Q(e,t){const n=F.get(e);if(!n)return;const s=n.get(t);s&&s.notify()}const V=new WeakMap,z=new Set;const X={};function G(e){for(const t in X){const n=t;e.$hooks[n]=X[n]}}var J=Object.freeze({__proto__:null,bindHooks:G,computed:function(e){if(o(e)){const t=I(e(void 0));return D.set(t,e),t}{const{get:t}=e,n=I(t(void 0));return D.set(n,e),n}},createApp:function(e){const t=new R(e),n=e.setup.call(t,t.$props);var s,i;return s=t,i=n,Object.entries(i).forEach((([e,t])=>{if(o(t))Object.defineProperty(s,e,{configurable:!1,value:(...e)=>t.apply(s,e)});else if(B(t)&&D.has(t)){t.__v_exp=e;const n=D.get(t),i={};o(n)?i.get=()=>n.call(s):(i.get=n.get.bind(s),i.set=(...e)=>{n.set.apply(s,e)}),Object.defineProperty(s,e,i)}else B(t)?(t.__v_exp=e,Object.defineProperty(s,e,{configurable:!1,get:()=>t.value,set:e=>{t.value=e}})):H(t)&&Object.defineProperty(s,e,{configurable:!1,get:()=>t})})),function(e){z.forEach((t=>{new $(e,t.__v_exp,V.get(t))}))}(t),G(t),{...t,component(e,t){return R.component(e,t),this},mount(e){t.mount(e)}}},isProxy:H,isRef:B,onBeforeMount:function(e){X.beforeMount=e},onBeforeUpdate:function(e){X.beforeUpdate=e},onMounted:function(e){X.mounted=e},onUpdated:function(e){X.updated=e},reactive:W,ref:I,watch:function(e,t){z.add(e),V.set(e,t)}});Object.defineProperty(Object.prototype,"_length",{get:function(){return Object.hasOwn(this,"length")?this.length:"object"===s(this)?Object.keys(this).length:0},enumerable:!1});const{createApp:K,ref:Y,reactive:Z,computed:ee,watch:te,isRef:ne,isProxy:se,onBeforeMount:ie,onMounted:re,onBeforeUpdate:oe,onUpdated:ce}=J;e.computed=ee,e.createApp=K,e.default=R,e.isProxy=se,e.isRef=ne,e.onBeforeMount=ie,e.onBeforeUpdate=oe,e.onMounted=re,e.onUpdated=ce,e.reactive=Z,e.ref=Y,e.watch=te,Object.defineProperty(e,"__esModule",{value:!0})}));
